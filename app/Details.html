<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>12任务平台</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <link rel="stylesheet" href="../plugin/sui-mobile/dist/css/sm.min.css">
    <link rel="stylesheet" href="../plugin/sui-mobile/dist/css/sm-extend.min.css">
    <link rel="stylesheet" href="../plugin/sui-mobile/_site/assets/css/demos.css">


</head>

<body>
<div class="row">
    <header class="bar bar-nav" id="header">
        <a class="button button-link button-nav pull-left back" href="javascript:history.go(-1)">
            <span class="icon icon-left"></span>
            返回
        </a>
        <a class="button button-link button-nav pull-right" href="List.html">
            首页
            <span class="icon icon-right"></span>
        </a>
        <h1 class="title">标题</h1>
    </header>
</div>

<div class="row" style="margin: 50px auto;text-align: center;" id="nullText">
    <div style="font-size: 30px;" id="projectName">

    </div>
    <span style="color: red;" id="amount"></span>元
</div>


<div id="content" style=" width: 95%;margin: 0 auto; overflow-y: auto;">

</div>


<script src="../plugin/jquery/jquery-3.2.1.js"></script>
<script src="../plugin/sui-mobile/dist/js/sm.js"></script>
<script src="js/setting.js"></script>
<script>

    (function () {

        var APIUrl = getAPIUrl();

        $(document).ready(function () {

            var bodyH = $("body").outerHeight(true);
            var headHeight = $("#header").outerHeight(true);
            $("#content").height(bodyH - headHeight);

            var param = location.hash;
            param = param.toString().replace("#", "");
            param = param.slice(4);
            console.log(param);

            $.showIndicator();
            $.ajax({
                type: "GET",
                url: APIUrl + "/api/H5/taskByID",
                data: {id: param},
                dataType: "json",
                success: function (data) {
                    console.log(data);

                    if (data.data == null) {
                        // console.log("66666666666");
                        $("#nullText").empty();
                        $("#nullText").append("该任务不存在");

                    } else {
                        $("#projectName").append(data.data.projectName);
                        $("#amount").append(data.data.amount);
                        $("#content").append(data.data.ueditorContent);
                    }
                }
                , error() {
                    console.log("获取taskByID信息err");
                    // layer.msg('请检查网络设置，再重试');
                    $.toast("请检查网络设置，再重试", "text");
                }
                , complete: function () {
                    setTimeout(function () {
                        $.hideIndicator();
                    }, 500);
                }
            });
        });
    })();

</script>

</body>
</html>